\newcommand{\ipa}[1]{\slash#1\slash}
\newcommand{\anglebracket}[1]{$\langle\text{#1}\rangle$}
\newcommand{\AbR}[1]{\AbugidaR{#1}}
\newcommand{\getname}[1]{\pgfkeysvalueof{/getname/#1}}
\newcommand{\hyper}[1]{\href{\pgfkeysvalueof{/geturl/#1}}{#1}}
\newcommand{\ipatable}[2]{\anglebracket{#1}&\ipa{#2}}
\newcommand{\super}[2]{#1\textsuperscript{#2}}
\ExplSyntaxOn
\int_new:N \l_tmpc_int
\NewDocumentCommand{\namerefrange}{m}
	{
		\clist_set:Nn \l_tmpa_clist { #1 }
		\int_compare:nNnTF { \clist_count:N \l_tmpa_clist } = {1}
			{
				\nameref{\clist_item:Nn \l_tmpa_clist {1}}
			}
			{
				\int_set:Nn \l_tmpb_int { \clist_count:N \l_tmpa_clist }
				\int_zero:N \l_tmpc_int
				\clist_map_inline:Nn \l_tmpa_clist
					{
						\int_incr:N \l_tmpc_int
						\nameref{##1}
						\int_compare:nNnTF {\l_tmpc_int} < {\l_tmpb_int - 1}
							{,~}
							{
								\int_compare:nNnTF {\l_tmpc_int} = {\l_tmpb_int - 1}
									{~\&~}
									{}
							}
					}
			}
	}
\ExplSyntaxOff
\renewcommand*{\glossarysection}[2][]{}
\newcommand{\diacritic}[3]{%
	\ifthenelse{\equal{#1}{+}}{%
		$\overset{\text{#3}}{\text{#2}}$%
	}{%
		\ifthenelse{\equal{#1}{-}}{%
			$\underset{\text{#3}}{\text{#2}}$%
		}{%
			\ifthenelse{\equal{#1}{=}}{%
				\stackinset{c}{0ex}{c}{0ex}{\text{#2}}{\text{#3}}%
			}{%
				\texttt{%
					#2\{#3\}%
				}%
				\GenericWarning{diacritic}{'#1' is an Invalid direction. use '+' or '-'}%
			}%
		}%
	}%
}
\DeclareRobustCommand{\abg}[1]{%
	\abgloop{#1}%
}
\newcommand{\abgloop}[1]{%
	\StrLen{#1}[\stringlen]
	\abgloopaux{#1}{1}{\stringlen}%
}
\newcommand{\abgloopaux}[3]{%
	\ifnumcomp{#2}{>}{#3}{%    <- note the three separate args
	}{%
		\StrChar{#1}{#2}[\thischar]%
		\StrChar{#1}{\numexpr#2+1\relax}[\nextchar]%
		\IfEq{\nextchar}{;}{%  modifier follows
			\abgmapcompose{\thischar}{;}%
			\abgloopaux{#1}{\numexpr#2+2\relax}{#3}%
		}{%  no modifier
			\abgmapchar{\thischar}%
			\abgloopaux{#1}{\numexpr#2+1\relax}{#3}%
		}%
	}%
}
\newcommand{\abgmapcompose}[2]{%
	\begingroup%
		\edef\tempchar{#1}%
		\uppercase{\edef\tempchar{\tempchar}}%
		\IfEq{\tempchar}{D}{<D;>}{}%
		\IfEq{\tempchar}{N}{<N;>}{}%
		\IfEq{\tempchar}{S}{<S;>}{}%
		\IfEq{\tempchar}{T}{<T;>}{}%
		\IfEq{\tempchar}{Z}{<Z;>}{}%
		\IfEq{\tempchar}{E}{<E;>}{}%
		\IfEq{\tempchar}{I}{<I;>}{}%
		\IfEq{\tempchar}{O}{<O;>}{}%
		\IfEq{\tempchar}{U}{<U;>}{}%
	\endgroup%
}

% Map single characters
\newcommand{\abgmapchar}[1]{%
	\begingroup
		\edef\tempchar{#1}%
		\uppercase{\edef\tempchar{\tempchar}}%
		\IfEq{\tempchar}{B}{<B>}{}%
		\IfEq{\tempchar}{C}{<C>}{}%
		\IfEq{\tempchar}{D}{<D>}{}%
		\IfEq{\tempchar}{F}{<F>}{}%
		\IfEq{\tempchar}{G}{<G>}{}%
		\IfEq{\tempchar}{H}{<H>}{}%
		\IfEq{\tempchar}{J}{<J>}{}%
		\IfEq{\tempchar}{K}{<K>}{}%
		\IfEq{\tempchar}{L}{<L>}{}%
		\IfEq{\tempchar}{M}{<M>}{}%
		\IfEq{\tempchar}{N}{<N>}{}%
		\IfEq{\tempchar}{P}{<P>}{}%
		\IfEq{\tempchar}{R}{<R>}{}%
		\IfEq{\tempchar}{S}{<S>}{}%
		\IfEq{\tempchar}{T}{<T>}{}%
		\IfEq{\tempchar}{V}{<V>}{}%
		\IfEq{\tempchar}{W}{<W>}{}%
		\IfEq{\tempchar}{X}{<X>}{}%
		\IfEq{\tempchar}{Y}{<Y>}{}%
		\IfEq{\tempchar}{Z}{<Z>}{}%
		\IfEq{\tempchar}{A}{<A>}{}%
		\IfEq{\tempchar}{E}{<E>}{}%
		\IfEq{\tempchar}{I}{<I>}{}%
		\IfEq{\tempchar}{O}{<O>}{}%
		\IfEq{\tempchar}{U}{<U>}{}%
		\IfEq{\tempchar}{;}{<;>}{}%
	\endgroup%
}